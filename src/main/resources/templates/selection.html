<!DOCTYPE HTML>
<html xmlns:th="https://www.thymeleaf.org">
<head>
    <title>Global Selection - Give Details</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    
    <!-- Changes for Calendar Input Date - START -->
    
	  <link href="https://code.jquery.com/ui/1.10.4/themes/ui-lightness/jquery-ui.css" rel="stylesheet">  
      <script src="https://code.jquery.com/jquery-1.10.2.js"></script>  
      <!-- <script src="https://code.jquery.com/jquery-1.3.2.min.js"></script>   -->
      <script src="https://code.jquery.com/ui/1.10.4/jquery-ui.js"></script> 
      
	 <style type="text/css">
		div {
			padding: 8px;
		}
		
		.button {
			border: none;
			color: white;
			padding: 10px;
			text-align: center;
			text-decoration: none;
			display: inline-block;
			font-size: 16px;
			margin: 4px 2px;
			cursor: pointer;
		}
		
		.button1 {
			background-color: green;
			border-radius: 8px;
		}
		
		.button2 {
			background-color: red;
			border-radius: 8px;
		}
	</style>
	  <!-- Javascript -->  
      <script th:inline="javascript">  
      /*<![CDATA[*/
    	  
    	 function goBack() 
    	 {
    	  	alert(document.getElementById("sitelistID").value);
    		 window.location.href = "/connectedplants/src/main/resources/templates/welcome.html";
    	 }
    	  
    
         $(function() {  
             $( "#fromdateID" ).datepicker({  
                dateFormat:"yy-mm-dd",  
             });  
             
             $( "#todateID" ).datepicker({  
                 dateFormat:"yy-mm-dd",  
              }); 
          }); 
         
         $(document).ready(function(){

        	  	var sitelist = [[${sitelists}]] ;
        	    
        	    var availList = document.getElementById("availSiteList");
        	    var selList = document.getElementById("selectSiteList");
        	    
        	    for (i = 0; i < sitelist.length; i++) {
        	    	
        	    	availList.options[availList.options.length] = new Option(sitelist[i].site, sitelist[i].site);
        	    }
        	    
        	    $("#addItems").click(function () {
				
        	        var sites = [];

        	        $.each($(".availSiteList option:selected"), function(){            

        	            if(sites.includes($(this).val()) != true){
        	            	
        	            	selList.options[selList.options.length] = new Option($(this).val(), $(this).val());
        	            	
        	            }
        	                    	            
        	            sites.push($(this).val());
        	        });

        	        document.getElementById("sitelistID").value = sites.join(", ");

            	});
        	    
        	    $("#removeItems").click(function () {
    				
        	        var sites = [];
       	        
        	        for(var count= selList.options.length-1; count >= 0; count--) {

        	            //if the option is selected, delete the option
        	           if(selList.options[count].selected == true) {
        	    
        	                   try {
        	                	   selList.remove(count, null);
        	                           
        	                    } catch(error) {
        	                           
        	                    	selList.remove(count);
        	                   }
        	           }
        	          
        	       }

        	        $.each($(".selectSiteList option"), function(){            

        	            sites.push($(this).val());
 
        	        });
        	        
        	       document.getElementById("sitelistID").value = sites.join(", ");
 
            	});
        	     
        	  });
	
      /*]]>*/   
      </script> 
	
	<!-- Changes for Calendar Input Date - END -->
    
</head>
 <body>
	<div class="" align="center">
		<div class="" align="center" style="background-color: #ffffcc">
			<h4 style="color: blue;">Global Configuration</h4>
		</div>

			<div class="" align="center">
			    <form action="#" th:action="@{/selection}" th:object="${production}" method="post">
				
				    <p><input type="Submit" value="Save" /> 
			              <input type="reset" value="Cancel" onclick="goBack();"/>
			        <input type="text" id="sitelistID" th:field="*{sitelist}"/>
			        </p>
				  
				    <p>
				    From (yyyy-MM-dd): <input type="text" id="fromdateID" th:field="*{fromdate}" size="10"/>
				 
				 	&nbsp;&nbsp;
				     
				    To (yyyy-MM-dd): <input type="text" id="todateID" th:field="*{todate}" size="10"/>
			        </p>
			
			
			    </form>
		    </div>
		
		<div>
		<table>
			<tr>
				<td>
				Available Sites <br>
				  <select class="availSiteList" name="availSiteList" id="availSiteList" multiple size="10" style="width: 150px;">
	
				  </select>
				</td>
				<td>
				   <input type='button' class='button button1' value='Add' id='addItems'>
				<br>
				<input type='button' class='button button2' value='Remove' id='removeItems'>
				</td>
				<td>
				Selected Sites <br>
				  <select class="selectSiteList" name="selectSiteList" id="selectSiteList" multiple size="10" style="width: 150px;">
				 
				  </select>
				</td>
			</tr>
		</table>
		</div>
		
	</div>

</body>
</html>